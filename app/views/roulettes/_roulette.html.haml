.card.shadow.bg-dark.text-light
  .card-header
    %b= link_to "Game â„– #{roulette.id}", roulette_path(roulette)
  .card-footer
    .text-center
      %h1
        win
        %b= roulette.shares_total
        credits
    %br
    .progress
      .progress-bar.bg-success{style: "width: #{roulette.percent_left}%"}
        %b= roulette.shares_taken
      .progress-bar.bg-danger{style: "width: #{100 - roulette.percent_left}%"}
        %b= roulette.shares_available
  - if Bet.where(user: current_user, roulette: roulette).any?
    .card-footer
      Your current bet:
      = current_user.bets.where(roulette: roulette).map(&:weight).sum
      %br
      Win chance:
      #{current_user.bets.where(roulette: roulette).map(&:weight).sum}/#{roulette.shares_total}

  .card-footer
    - if roulette.active?
      = link_to gamble_roulette_path(roulette, weight: 1), method: :patch, class: "btn btn-md btn-success btn-block" do
        Bet #{pluralize(1, 'credit')} 
        %br
        %small
          (win chance: 1/#{roulette.shares_total})
      = link_to gamble_roulette_path(roulette, weight: roulette.shares_available/2), method: :patch, class: "btn btn-md btn-success btn-block" do
        Bet #{pluralize(roulette.shares_available/2, 'credit')} 
        %br
        %small
          (win chance: #{roulette.shares_available/2}/#{roulette.shares_total})
      = link_to gamble_roulette_path(roulette, weight: roulette.shares_available), method: :patch, class: "btn btn-md btn-success btn-block" do
        Bet #{pluralize(roulette.shares_available, 'credit')} 
        %br
        %small
          (win chance: #{roulette.shares_available}/#{roulette.shares_total})
    - else
      .text-center
        %h1
          Winner:
          - if roulette.user.present?
            = link_to roulette.user, user_path(roulette.user)
